name: CICD BUILD AND PUSH IMAGE
on:
 push:
   branches:
     - dev
jobs:
  build:
   runs-on: ubuntu-latest
   container:
    image: betrand1997/myapp  
   steps:
     - name: checkout repo
       uses: actions/checkout@v2
     - name: run a command
       run: echo "Testing workflow"
     - name: Print environment info
       run: uname -a
    #  - name: login to docker
    #    uses: docker/login-action@v3
    #    with:
    #      username: ${{secrets.DOCKER_PASSWORD}}
    #      password: ${{secrets.DOCKER_USERNAME}}
     - name: build image 
       run: docker build -t app .
     - name: tag image 
       run: docker tag app betrand1997/app 
     - name: push image
       run: docker push betrand1997/app 

   